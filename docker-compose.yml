version: '3.7'

services:
  core:
    image: dashpay/dashd:${CORE_VERSION:-latest}
    restart: always
    ports:
      - ${P2P_PORT}:${P2P_PORT} # P2P
    volumes:
      - ./configs/${PRESET:?err}/core/dashd.conf:/dashd.conf
      - ./data/${PRESET:?err}/core:/data
    command:
      - dashd
      - -conf=/dashd.conf
      - -datadir=/data
      - -masternodeblsprivkey=${CORE_MASTERNODE_BLS_PRIV_KEY:?err}
      - -externalip=${CORE_EXTERNAL_IP:?err}

  sentinel:
    image: ablock/sentinel
    restart: always
    depends_on:
      - core
    environment:
      - DEBUG=false
      - RPCUSER=dashrpc
      - RPCPASSWORD=password
      - RPCHOST=core
      - RPCPORT=${RPC_PORT}
      - NETWORK=${SENTINEL_NETWORK}
      - SENTINEL_ARGS=-b
